<div class="container-scroller">
  <div class="container-fluid page-body-wrapper full-page-wrapper">
    <div class="content-wrapper d-flex align-items-center auth px-0">
      <div class="row w-100 mx-0">
        <div class="col-lg-4 mx-auto">
          <div class="auth-form-light text-left py-5 px-4 px-sm-5">
            <div class="brand-logo">
              <img src="/assets/logo.jpg" alt="logo">
            </div>
            <h4>Hello! Let's Reset Password Securely</h4>
            <h6 class="font-weight-light">Get OTP on this mail.</h6>
            <form class="pt-3" #resetPasswordForm="ngForm" (ngSubmit)="onSubmit(resetPasswordForm)">
              <div class="form-group">
                <div class="input-group">
                  <input [type]="showPassword ? 'text' : 'password'" class="form-control form-control-lg" id="newPassword"
                    [(ngModel)]="newPassword" name="newPassword" pattern="^(?=.*[0-9])(?=.*[@#$%^&+=])(?=.*[a-zA-Z]).+$"
                    placeholder="Enter New Password" required #passwordField="ngModel">
                  <div class="input-group-append">
                    <button type="button" class="btn btn-outline-secondary toggle-password"
                      (click)="togglePasswordVisibility('newPassword')">
                      <i class="fas" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
                    </button>
                  </div>
                </div>
                <div *ngIf="passwordField.invalid && (passwordField.dirty || passwordField.touched)">
                  <small class="text-danger" *ngIf="passwordField.errors?.['required']">Password is required.</small>
                  <small class="text-danger" *ngIf="passwordField.errors?.['pattern']">
                    Password must include at least one number, one special character, and one alphabetic character.
                  </small>
                </div>
              </div>
              <br>
              <br>
              <div class="form-group">
                <div class="input-group">
                  <input [type]="showConfirmPassword ? 'text' : 'password'" class="form-control form-control-lg"
                    id="confirmPassword" [(ngModel)]="confirmPassword" name="confirmPassword"
                    placeholder="Confirm Password" required #confirmPasswordField="ngModel" [disabled]="!newPassword">
                  <div class="input-group-append">
                    <button *ngIf="newPassword" type="button" class="btn btn-outline-secondary toggle-password"
                      (click)="togglePasswordVisibility('confirmPassword')">
                      <i class="fas" [ngClass]="showConfirmPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
                    </button>
                  </div>
                </div>
                <div *ngIf="confirmPasswordField.invalid && (confirmPasswordField.dirty || confirmPasswordField.touched)">
                  <small class="text-danger" *ngIf="confirmPasswordField.errors?.['required']">
                    Confirming your password is required.
                  </small>
                  <small class="text-danger" *ngIf="confirmPassword !== newPassword && confirmPassword?.length > 0">
                    Passwords do not match.
                  </small>
                </div>
              </div>
              <div class="mt-3">
                <!-- Updated Button with new styles applied -->
                <button type="submit" class="login_btn"
                  [disabled]="resetPasswordForm.invalid">Change Password</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>